[
  {
    "no": "1",
    "queryPattern": "Q1",
    "queryName": "Display Log Json",
    "lambdaFunctionName": "prd-coupon-InvokeCouponDisplayLog-function",
    "sourceCodeFunctionName": "displayedLogSql",
    "queryAlias": "Q1_1",
    "fullSQL": "SELECT l.couponId AS \"クーポンID\", o.name AS \"組織名\", l.couponCode AS \"クーポンコード\", l.couponName AS \"クーポン名\", l.barcode AS \"バーコード\", l.operateFrom AS \"操作元\", to_char(TIMESTAMP 'epoch' + (l.createAtMillis / 1000) * INTERVAL '1 second', 'YYYY-MM-DD\"T\"HH24:MI:SS.MS\"Z\"') AS \"日時\", (SELECT COUNT(*) FROM coupon_logs l2 WHERE l2.type = 'displayed' AND l2.couponId = l.couponId) AS \"参照回数\", l.couponMasterId AS \"クーポンマスタID\" FROM coupon_logs l JOIN ( SELECT couponId, MAX(createAtMillis) AS createAtMillis FROM coupon_logs WHERE type = 'displayed' GROUP BY couponId ) latest ON l.couponId = latest.couponId AND l.createAtMillis = latest.createAtMillis JOIN organization o ON l.organizationId = o.resourceId AND l.couponMasterId = '4bb8c2f8-5ef7-461d-97ea-312bd1761de5' AND l.couponMasterId = '4bb8c2f8-5ef7-461d-97ea-312bd1761de5' ORDER BY l.couponCode, l.couponName, l.createAtMillis LIMIT 100 OFFSET 0 ",
    "shortSQL": " _SAME_ AND l.couponMasterId = '4bb8c2f8-5ef7-461d-97ea-312bd1761de5' AND l.couponMasterId = '4bb8c2f8-5ef7-461d-97ea-312bd1761de5' ORDER BY l.couponCode, l.couponName, l.createAtMillis LIMIT 100 OFFSET 0 ",
    "count": "10"
  },
  {
    "no": "2",
    "queryPattern": "Q1",
    "queryName": "Display Log Json",
    "lambdaFunctionName": "prd-coupon-InvokeCouponDisplayLog-function",
    "sourceCodeFunctionName": "displayedLogSql",
    "queryAlias": "Q1_2",
    "fullSQL": "SELECT l.couponId AS \"クーポンID\", o.name AS \"組織名\", l.couponCode AS \"クーポンコード\", l.couponName AS \"クーポン名\", l.barcode AS \"バーコード\", l.operateFrom AS \"操作元\", to_char(TIMESTAMP 'epoch' + (l.createAtMillis / 1000) * INTERVAL '1 second', 'YYYY-MM-DD\"T\"HH24:MI:SS.MS\"Z\"') AS \"日時\", (SELECT COUNT(*) FROM coupon_logs l2 WHERE l2.type = 'displayed' AND l2.couponId = l.couponId) AS \"参照回数\", l.couponMasterId AS \"クーポンマスタID\" FROM coupon_logs l JOIN ( SELECT couponId, MAX(createAtMillis) AS createAtMillis FROM coupon_logs WHERE type = 'displayed' GROUP BY couponId ) latest ON l.couponId = latest.couponId AND l.createAtMillis = latest.createAtMillis JOIN organization o ON l.organizationId = o.resourceId AND l.couponMasterId = 'dd64917a-0420-416b-8908-5743ca434627' AND l.couponMasterId = 'dd64917a-0420-416b-8908-5743ca434627' ORDER BY l.couponCode, l.couponName, l.createAtMillis LIMIT 100 OFFSET 0 ",
    "shortSQL": " _SAME_ AND l.couponMasterId = 'dd64917a-0420-416b-8908-5743ca434627' AND l.couponMasterId = 'dd64917a-0420-416b-8908-5743ca434627' ORDER BY l.couponCode, l.couponName, l.createAtMillis LIMIT 100 OFFSET 0 ",
    "count": "7"
  }
]
